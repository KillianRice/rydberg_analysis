function [ Amplitude, FittingRoutine ] = FCpoly_Fit( xData, yData, yData_error, error_flag, order )
% fit data to a constant value

Model = @(coeffs,x) coeffs(1).*x.^order;

switch error_flag
    case 0 %don't use error data
        FittingRoutine = NonLinearModel.fit(...
            xData, yData,...
            Model,...
            [mean(yData)],...
            'CoefficientNames',{'Amplitude'}...
        );                
    case 1 %use error data
        FittingRoutine = NonLinearModel.fit(...
            xData, yData,...
            Model,...
            [mean(yData)],...
            'CoefficientNames',{'Amplitude'},...
            'Weights', (yData_error).^-2 ...
        );        
end
   
Amplitude  = double(FittingRoutine.Coefficients('Amplitude',{'Estimate', 'SE'}));
end