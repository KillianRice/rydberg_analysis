function [ Constant, FittingRoutine ] = Constant_Value_Fit( xData, yData, yData_error, error_flag )
% fit data to a constant value

Model = @(coeffs,x) coeffs(1)+(x-x);

switch error_flag
    case 0 %don't use error data
        FittingRoutine = NonLinearModel.fit(...
            xData, yData,...
            Model,...
            [mean(yData)],...
            'CoefficientNames',{'Constant'}...
        );                
    case 1 %use error data
        FittingRoutine = NonLinearModel.fit(...
            xData, yData,...
            Model,...
            [mean(yData)],...
            'CoefficientNames',{'Constant'},...
            'Weights', (yData_error).^-2 ...
        );        
end
   
Constant  = double(FittingRoutine.Coefficients('Constant',{'Estimate', 'SE'}));
end